# MYSQL CONFIG
# mysql_host: groups['db_servers'][0]
mysql_host: 192.168.42.40
mysql_database: agama
mysql_user: agama
mysql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63653435636461656239343433353236633763336131303833366337653031323561656666363937
          3736313731313539646531306262386161346439313239320a326261616333636337373730656465
          34336335626531363539346661343664323863343037326335346537646436383331323366613037
          6162626339623833300a306637343766633632363630353331656264383766656136383065313262
          3334
# MYSQL EXPORTER CONFIG
mysql_exporter_user: exporter
mysql_exporter_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35616365373935656431343463316564393139653531383838393536333166643230616536303635
          3166393963653062396261393639643038653765633637610a623139626335663336646130323832
          31373230646631316130333565636335376532646132396466343133343533363538653735386234
          3665303838353230650a323662646532613132393935313037323032633263653132626161396466
          3937
# MYSQL REPLICATION CONFIG
mysql_replication_user: replication
mysql_replication_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66333365633032663336356138636636616366356133333635316664316432636537316537633331
          3836376666383564656230643362313162313136373631650a383866386235376538363533363838
          30623831333132616430326466663031303361656362353964393662623064646532323063363666
          6566323731303962610a336166656639636235383831393666323566323930383531633766373939
          3434
node_id: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'].split('.')[-1] }}"

# GRAFANA CONFIG 
grafana_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66336638356635643864363030303434626131663866373566633038356130643766383138656635
          3366643066613836333332343139653736363862363562300a323762663466643537643934653866
          38393932373832393839663037333239643834633964636465656633333634633162396135303131
          3431366238663162390a356663343063363863326634353432633931353532373330643664613533
          6463
# BACKUP CONFIG
backup_mysql_user: backup
backup_mysql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62333631653931623364646632343266306161633036613265646136313233636262666663323031
          3361316330316437366637343833336662393530323164610a663164613361383634383665633463
          62363731393861323331643939373934646433373731326231626134393833363065383230326263
          3031656464646466370a646339633862313534363939653863366366653639626334656436363465
          6330
backup_server_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu6pFFWyuRrl4WGFPQGElYN9txwTGm2wSntcpVAaN90



# DNS CONFIG
dns_forwarders:
    - 1.1.1.1
    - 8.8.8.8
    - 9.9.9.9
    - 9.9.9.10 

subnets: 
  - 192.168.42.0/24
  - 127.0.0.0/8

dns_record:
  - name: vm1
    ip: 	192.168.42.123
    public_url: http://193.40.156.67:12380 
    virtual_address: 192.168.100.123
  - name: vm2
    ip: 192.168.42.40
    public_url: http://193.40.156.67:4080
    virtual_address: 192.168.100.40
  - name: vm3
    ip: 192.168.42.47
    public_url: http://193.40.156.67:4780
    virtual_address: 192.168.100.47

  - name: backup
    ip: 192.168.42.132

domain: snackdrivein.io
startup_name: snackdrivein 

# PROMETHEUS CONFIG
prometheus_port: 9090

prometheus_exporters:

  node:
    port: 9100

  bind:
    port: 9119

  mysql:
    port: 9104

  nginx:
    port: 9113

  influxdb:
    port: 9424
    
  haproxy:
    port: 9101
  
  keepalived:
    port: 9165

  grafana:
    port: 3001


# DOCKER CONFIG

grafana_port: 3001
agama_port: 8001

docker_user: scentryum
docker_email: mehmetascgn@gmail.com
docker_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35323735393461663232643237633065353061393862326439353766666364633763623164636464
          3831373232666535376539643734646638336264353661660a653232366439626132336530346434
          32306465353139323733666161363737336365313762323264346430616665346663623436333031
          3136393439376437300a393737653662656361623862646631393933646438373738303334313664
          6130

agama_container_per_vm: 2

# Haproxy and Keepalived configs

haproxy_port: 88

# DNS Configs

dns_transfer_key_name: transfer.key
dns_transfer_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64383037636135373461626636636562663539303762623333393062333630613763633331636330
          3965663037616539336266636338323833396235313335330a373762393164343230633535396234
          37356365346533663833626263313162633838313930333737646264653030333232313164393966
          3933393663366438310a383565383235666263633638343464316539633265656662393737393866
          33363537383436623234323765303365313637633465336236363233303163383661393235636461
          6162646130333966303838383538633936623265626530333066

dns_update_key_name: nsupdate.key
dns_update_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35383862366337383762306339623863333566666436383932363766656261663431626532663262
          6339346461323665326233306635383461656464636636390a393637383165393533663536633638
          65653765373565326161616531656439393639346636666266646362616230366233316461376633
          3339633662396637330a306435643166663661646230656637303365313534376164353738356238
          63653237656333643535663537323962373130333061386331663732373434336238383034663065
          6233303732663431333564666339663434343233326662626261

reverse_mapping_vms_part: 42.168.192.in-addr.arpa

cnames:
  - cname: grafana
    real: "{{ groups['grafana'][0] }}"
  - cname: influxdb
    real: "{{ groups['influxdb'][0] }}"
  - cname: prometheus
    real: "{{ groups['prometheus'][0] }}"
  - cname: lb1
    real: "{{ groups['haproxy'][0] }}"
  - cname: lb2
    real: "{{ groups['haproxy'][1] }}"
  - cname: mysql1
    real: "{{ groups['db_servers'][0] }}"
  - cname: mysql2
    real: "{{ groups['db_servers'][1] }}"
  - cname: ns1
    real: "{{ groups['dns_servers'][0] }}"
  - cname: ns2
    real: "{{ groups['dns_servers'][1] }}"
  - cname: ns3
    real: "{{ groups['dns_servers'][2] }}"
  - cname: web1
    real: "{{ groups['web_servers'][0] }}"
  - cname: web2
    real: "{{ groups['web_servers'][1] }}"

services:
  all:
    - prometheus-node-exporter
    - prometheus-nginx-exporter
    - rsyslog
  docker:
    - docker
  web_servers:
    - nginx
  db_servers:
    - mysql
    - prometheus-mysqld-exporter
  dns_servers:
    - bind9
    - prometheus-bind-exporter
  prometheus:
    - prometheus
  influxdb:
    - influxdb
    - telegraf
    - pinger
    - prometheus-influxdb-stats-exporter
  haproxy:
    - haproxy
    - prometheus-haproxy-exporter
    - keepalived
    - keepalived-prometheus-exporter